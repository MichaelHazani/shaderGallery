function init(){scene=new THREE.Scene;var e=window.innerWidth,r=window.innerHeight,n=45,o=e/r,t=.1,a=4e4;camera=new THREE.PerspectiveCamera(45,o,.1,4e4),scene.add(camera),camera.position.set(2050,500,1900),camera.lookAt(scene.position),renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setSize(e,r),container=document.getElementById("container"),container.appendChild(renderer.domElement);var i=new THREE.PointLight(16777215);i.position.set(100,250,100),scene.add(i);var s=new THREE.CubeGeometry(1e4,1e4,1e4),d=new THREE.MeshBasicMaterial({color:10066431,side:THREE.BackSide}),m=new THREE.Mesh(s,d);scene.add(m),uniforms1={time:{type:"f",value:1},resolution:{value:new THREE.Vector2}};for(var c=[["fragment_shader1",uniforms1],["fragment_shader3",uniforms1],["fragment_shader4",uniforms1],["fragment_shader5",uniforms1],["fragment_shader6",uniforms1]],w=[new THREE.SphereGeometry(30,32,16),new THREE.BoxGeometry(40,40,40),new THREE.IcosahedronBufferGeometry(32),new THREE.CylinderBufferGeometry(30,30,40,32),new THREE.OctahedronBufferGeometry(42),new THREE.TorusBufferGeometry(40,3,16,100),new THREE.DodecahedronBufferGeometry(32),new THREE.TorusKnotBufferGeometry(20,13,100,16)],E=0;E<10;E++)for(var u=0;u<10;u++)for(var l=0;l<10;l++){var f=w[E%10],h=new THREE.ShaderMaterial({uniforms:uniforms1,vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById(c[E%5][0]).textContent}),p=new THREE.Mesh(f,h);p.position.x=400*E-1e3,p.position.y=200*u+20,p.position.z=400*l-1e3,scene.add(p)}waterNormals=(new THREE.TextureLoader).load("./images/waternormals.jpeg"),waterNormals.wrapS=waterNormals.wrapT=THREE.RepeatWrapping,water=new THREE.Water(renderer,camera,scene,{textureWidth:512,textureHeight:512,waterNormals:waterNormals,alpha:1,sunDirection:i.position.clone().normalize(),sunColor:16777215,waterColor:7695,distortionScale:50,fog:void 0!=scene.fog}),floor=new THREE.Mesh(new THREE.PlaneGeometry(9e3,9e3,50,50),water.material),floor.position.y=-.5,floor.add(water),floor.rotation.x=Math.PI/-2,floor.position.set(400,0,400),scene.add(floor)}function animate(){requestAnimationFrame(animate),render(),update()}function update(){}function render(){renderer.render(scene,camera);var e=clock.getDelta();water.material.uniforms.time.value+=1/60,water.render(),uniforms1.time.value+=5*e}function onWindowResize(e){uniforms1.resolution.value.x=window.innerWidth,uniforms1.resolution.value.y=window.innerHeight,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function onMouseMove(e){camera.position.x+=.9*(e.clientX-camera.position.x),camera.position.y+=.9*(e.clientY-camera.position.y),camera.lookAt(scene.position)}var container,scene,camera,renderer,controls,clock=new THREE.Clock,mesh,uniforms1,waterNormals;init(),animate(),window.addEventListener("resize",onWindowResize,!1),window.addEventListener("mousemove",onMouseMove,!1);